version: 2
sources:
- name: tpch
  database: SNOWFLAKE_SAMPLE_DATA
  schema: TPCH_SF1
  meta:
    hidden: false
  tables:
  - name: orders
    identifier: ORDERS
    meta:
      mappings:
        eventTimestamp: o_orderdate
      aggregates:
        total_orders_priority:
          measures: ['count_of_rows', 'unique_orders']
          dimensions: ['o_orderdate', 'o_shippriority', 'o_orderpriority']
      measures:
        count_of_rows:
          aggregation: count
        unique_orders:
          dimension: o_orderkey
          aggregation: approximate_unique
      dimensions:
        o_orderkey:
          column : o_orderkey
        o_custkey: o_orderkey
        o_orderstatus: CONCAT('1' ,o_orderstatus)

    columns:
    - name: o_orderkey
      meta:
        type: double
    - name: o_custkey
      meta:
        type: double
    - name: o_orderstatus
      meta:
        type: string
    - name: o_totalprice
      meta:
        type: double
    - name: o_orderdate
      meta:
        type: date
    - name: o_orderpriority
      meta:
        type: string
    - name: o_clerk
      meta:
        type: string
    - name: o_shippriority
      meta:
        type: double
    - name: o_comment
      meta:
        type: string
